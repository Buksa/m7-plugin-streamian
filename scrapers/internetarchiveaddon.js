// Archive.org Addon for Streamian | M7 / Movian Media Center
// Author: F0R3V3R50F7
exports.search = function (page, title) {
    function _0x3734(){var _0xaefa86=['trailer\x20park\x20boys\x20the\x20animated\x20series','files','duel','6965220mZeaiX','match','test','72jMKwhD','557459bmifWM','90063PlOcHJ','king-of-the-hill13seasons','220158tUfRMq','identifier','.mkv','mediatype','.avi','H265Filter','6wHWWMB','subject','title','replace','24777TFXcXv','downloads\x20desc','trailer\x20park\x20boys','479635IHWWlZ','.flv','trailer\x20park\x20boys\x20out\x20of\x20the\x20park','720p','response','sqjeargbrmdmkfm0pgf','toString','name','doopey\x20poopy','Unknown','indexOf','bad\x20santa','https://archive.org/download/','480p','parse','format','trains\x20and\x20automobiles','duel_1971.mp4','push','.ia.mp4','neighbors\x202014','8TDUlER','docs','httpReq','uncle\x20buck','json','.mov','length','1080p','https://archive.org/metadata/','379514hYrPjf','toLowerCase','loading','\x20-\x20','quality','trailer\x20park\x20boys\x20jail'];_0x3734=function(){return _0xaefa86;};return _0x3734();}var _0xb6c93=_0x1fb5;(function(_0x5c0517,_0x42cee6){var _0x24dc20=_0x1fb5,_0x5072c4=_0x5c0517();while(!![]){try{var _0x444cc7=-parseInt(_0x24dc20(0x13e))/0x1+-parseInt(_0x24dc20(0x130))/0x2+-parseInt(_0x24dc20(0x140))/0x3*(parseInt(_0x24dc20(0x127))/0x4)+-parseInt(_0x24dc20(0x112))/0x5+-parseInt(_0x24dc20(0x146))/0x6*(parseInt(_0x24dc20(0x13d))/0x7)+parseInt(_0x24dc20(0x13c))/0x8*(parseInt(_0x24dc20(0x10f))/0x9)+parseInt(_0x24dc20(0x139))/0xa;if(_0x444cc7===_0x42cee6)break;else _0x5072c4['push'](_0x5072c4['shift']());}catch(_0x5e8d2e){_0x5072c4['push'](_0x5072c4['shift']());}}}(_0x3734,0x1d167));var relevantTitlePartMatch=title[_0xb6c93(0x13a)](/^(.*?)(?:\sS\d{2}E\d{2}|\s\d{4})/i),relevantTitlePart=relevantTitlePartMatch[0x1]['trim']()[_0xb6c93(0x131)]()['replace'](/\./g,'\x20')[_0xb6c93(0x149)](/[\-:]/g,'');page['loading']=!![];var query=title,episodeIdentifier=query['match'](/s\d+e\d+/gi),identifier;if(!episodeIdentifier)var identifier=query[_0xb6c93(0x13a)](/\d{4}/i);function _0x1fb5(_0x19a495,_0x2d8bb5){var _0x37348f=_0x3734();return _0x1fb5=function(_0x1fb5a5,_0x51d677){_0x1fb5a5=_0x1fb5a5-0x10f;var _0x2a0664=_0x37348f[_0x1fb5a5];return _0x2a0664;},_0x1fb5(_0x19a495,_0x2d8bb5);}if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)]('king\x20of\x20the\x20hill')!==-0x1)modifiedQuery=_0xb6c93(0x13f);else{if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x111))!==-0x1)modifiedQuery=_0xb6c93(0x11a);else{if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)]('the\x20simpsons')!==-0x1)modifiedQuery='thesimpletons\x202';else{if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x11d))!==-0x1)modifiedQuery=_0xb6c93(0x117);else episodeIdentifier?modifiedQuery=relevantTitlePart:modifiedQuery=query;}}}var apiUrl='https://archive.org/advancedsearch.php',args={'q':modifiedQuery,'fl':['identifier',_0xb6c93(0x148),_0xb6c93(0x143),_0xb6c93(0x147),_0xb6c93(0x121)],'sort':_0xb6c93(0x110),'rows':0x23,'page':0x1,'output':_0xb6c93(0x12b)};try{var response=showtime[_0xb6c93(0x129)](apiUrl,{'args':args}),json=JSON[_0xb6c93(0x120)](response[_0xb6c93(0x118)]());if(json[_0xb6c93(0x116)]&&json['response'][_0xb6c93(0x128)]&&json[_0xb6c93(0x116)][_0xb6c93(0x128)][_0xb6c93(0x12d)]>0x0){var results=[],matchedFiles=[],nonMatchedFiles=[],videoExtensions=['.mp4',_0xb6c93(0x144),_0xb6c93(0x142),_0xb6c93(0x12c),'.wmv',_0xb6c93(0x113)],cleanedQuery=relevantTitlePart;for(var i=0x0;i<json[_0xb6c93(0x116)][_0xb6c93(0x128)][_0xb6c93(0x12d)];i++){var doc=json[_0xb6c93(0x116)][_0xb6c93(0x128)][i];if(doc[_0xb6c93(0x147)]&&doc[_0xb6c93(0x147)][_0xb6c93(0x11c)]('Movie\x20Trailer')!==-0x1)continue;var itemDetailsUrl=_0xb6c93(0x12f)+doc[_0xb6c93(0x141)],itemResponse=showtime[_0xb6c93(0x129)](itemDetailsUrl),itemJson=JSON[_0xb6c93(0x120)](itemResponse[_0xb6c93(0x118)]());if(itemJson['files']){var foundFile=![];for(var j=0x0;j<itemJson[_0xb6c93(0x137)]['length'];j++){var file=itemJson[_0xb6c93(0x137)][j],isVideoFile=![];for(var k=0x0;k<videoExtensions[_0xb6c93(0x12d)];k++){if(file[_0xb6c93(0x119)][_0xb6c93(0x131)]()[_0xb6c93(0x11c)](videoExtensions[k])!==-0x1){isVideoFile=!![];break;}}var titleForCheck=file[_0xb6c93(0x119)]['trim']()[_0xb6c93(0x131)]()[_0xb6c93(0x149)](/\./g,'\x20')['replace'](/[\-:]/g,'');if(titleForCheck[_0xb6c93(0x11c)](relevantTitlePart)===-0x1)continue;if(!episodeIdentifier&&titleForCheck[_0xb6c93(0x11c)](identifier)===-0x1)continue;if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x138))!==-0x1&&file['name'][_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x123))!==-0x1)continue;if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x12a))!==-0x1&&file[_0xb6c93(0x119)][_0xb6c93(0x131)]()['indexOf']('bbc')!==-0x1)continue;if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x122))!==-0x1&&file[_0xb6c93(0x119)][_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x125))===-0x1)continue;if(query[_0xb6c93(0x131)]()[_0xb6c93(0x11c)](_0xb6c93(0x126))!==-0x1&&!/(brrip|1080p|720p|xvid|dvdrip)/i[_0xb6c93(0x13b)](file[_0xb6c93(0x119)][_0xb6c93(0x131)]()))continue;var excludeJail=relevantTitlePart[_0xb6c93(0x11c)]('trailer\x20park\x20boys\x20jail')===-0x1&&titleForCheck['indexOf'](_0xb6c93(0x135))!==-0x1;if(excludeJail)continue;var excludeAnimated=relevantTitlePart[_0xb6c93(0x11c)](_0xb6c93(0x136))===-0x1&&titleForCheck[_0xb6c93(0x11c)](_0xb6c93(0x136))!==-0x1;if(excludeAnimated)continue;var excludeAnimated=relevantTitlePart[_0xb6c93(0x11c)](_0xb6c93(0x114))===-0x1&&titleForCheck['indexOf'](_0xb6c93(0x114))!==-0x1;if(excludeAnimated)continue;if(service[_0xb6c93(0x145)]&&/[xXhH]265/i['test'](file[_0xb6c93(0x119)]))continue;var quality=_0xb6c93(0x11b);if(/1080p/i[_0xb6c93(0x13b)](titleForCheck))quality=_0xb6c93(0x12e);else{if(/720p/i[_0xb6c93(0x13b)](titleForCheck))quality=_0xb6c93(0x115);else/XviD/i[_0xb6c93(0x13b)](titleForCheck)&&(quality=_0xb6c93(0x11f));}if(episodeIdentifier&&file['name'][_0xb6c93(0x131)]()[_0xb6c93(0x11c)](episodeIdentifier[0x0][_0xb6c93(0x131)]())!==-0x1&&isVideoFile){foundFile=!![];var videoLink=_0xb6c93(0x11e)+doc[_0xb6c93(0x141)]+'/'+encodeURIComponent(file['name']);matchedFiles[_0xb6c93(0x124)]({'title':file[_0xb6c93(0x119)],'item':videoLink,'quality':quality});}else{if(isVideoFile){var queryWords=cleanedQuery[_0xb6c93(0x131)]()['split'](/\s+/);if(queryWords['every'](function(_0x2a3419){var _0x343232=_0xb6c93;return file['name'][_0x343232(0x131)]()[_0x343232(0x11c)](_0x2a3419)!==-0x1;})){var videoLink=_0xb6c93(0x11e)+doc[_0xb6c93(0x141)]+'/'+encodeURIComponent(file[_0xb6c93(0x119)]);nonMatchedFiles[_0xb6c93(0x124)]({'title':file['name'],'item':videoLink,'quality':quality});}}}}}}if(matchedFiles[_0xb6c93(0x12d)]>0x0)for(var i=0x0;i<matchedFiles[_0xb6c93(0x12d)];i++){var magnetLink=matchedFiles[i]['item'],quality=matchedFiles[i][_0xb6c93(0x134)],seederCount='60',item=magnetLink+_0xb6c93(0x133)+quality+'\x20-\x20'+seederCount;results[_0xb6c93(0x124)](item);}else{nonMatchedFiles['sort'](function(_0x5966b4,_0x18af56){var _0x176912=_0xb6c93;return _0x5966b4[_0x176912(0x148)]['length']-_0x18af56['title'][_0x176912(0x12d)];});if(nonMatchedFiles[_0xb6c93(0x12d)]>0x0&&!episodeIdentifier)for(var i=0x0;i<nonMatchedFiles['length'];i++){var magnetLink=nonMatchedFiles[i]['item'],quality=nonMatchedFiles[i][_0xb6c93(0x134)],seederCount='60',item=magnetLink+_0xb6c93(0x133)+quality+_0xb6c93(0x133)+seederCount;results[_0xb6c93(0x124)](item);}else return[];}return page[_0xb6c93(0x132)]=![],results;}else return[];}catch(_0x1cb3b5){return page['loading']=![],[];}
    };