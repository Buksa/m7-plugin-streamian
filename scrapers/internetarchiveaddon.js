// Archive.org Addon for Streamian | M7 / Movian Media Center
// Author: F0R3V3R50F7
exports.search = function (page, title) {
    var _0x4cab71=_0x8da7;(function(_0x3ac8e3,_0x3eaae4){var _0x49ed10=_0x8da7,_0x20731d=_0x3ac8e3();while(!![]){try{var _0x1c4df4=-parseInt(_0x49ed10(0xa0))/0x1*(-parseInt(_0x49ed10(0x97))/0x2)+-parseInt(_0x49ed10(0x85))/0x3*(parseInt(_0x49ed10(0xa6))/0x4)+parseInt(_0x49ed10(0xb2))/0x5+parseInt(_0x49ed10(0x7b))/0x6*(-parseInt(_0x49ed10(0xb1))/0x7)+parseInt(_0x49ed10(0xac))/0x8+-parseInt(_0x49ed10(0x9b))/0x9+parseInt(_0x49ed10(0xbc))/0xa;if(_0x1c4df4===_0x3eaae4)break;else _0x20731d['push'](_0x20731d['shift']());}catch(_0x535b74){_0x20731d['push'](_0x20731d['shift']());}}}(_0x29bf,0x6f438),page[_0x4cab71(0x88)]=!![]);var queryIdentifierMatch=title[_0x4cab71(0xb4)](/\s(S\d{2}E\d{2})/i);if(queryIdentifierMatch){var queryIdentifier=queryIdentifierMatch[0x1][_0x4cab71(0xab)]()['toLowerCase']();console['log']('Internet\x20Archive\x20|\x20Relevant\x20title\x20part:\x20'+queryIdentifier);}else{var queryIdentifier=title[_0x4cab71(0xb4)](/\b(19\d{2}|20\d{2})\b/);queryIdentifier?(queryIdentifier=queryIdentifier[0x0],console[_0x4cab71(0xa8)](_0x4cab71(0xb7)+queryIdentifier)):console['log'](_0x4cab71(0x8a));}if(title[_0x4cab71(0x9f)]()[_0x4cab71(0xb5)](_0x4cab71(0xaf))!==-0x1)modifiedTitle=_0x4cab71(0x8d);else{if(title[_0x4cab71(0x9f)]()['indexOf'](_0x4cab71(0xa4))!==-0x1)modifiedTitle=_0x4cab71(0xad);else{if(title['toLowerCase']()['indexOf'](_0x4cab71(0x9c))!==-0x1)modifiedTitle=_0x4cab71(0xa5);else{if(title[_0x4cab71(0x9f)]()['indexOf'](_0x4cab71(0xb8))!==-0x1)modifiedTitle='sqjeargbrmdmkfm0pgf';else queryIdentifier?modifiedTitle=queryIdentifier:modifiedTitle=title;}}}var apiUrl=_0x4cab71(0x81),args={'q':modifiedTitle,'fl':['identifier',_0x4cab71(0xbb),_0x4cab71(0xb6),_0x4cab71(0x9d),_0x4cab71(0x7d)],'sort':_0x4cab71(0x99),'rows':0x23,'page':0x1,'output':_0x4cab71(0xa7)};try{var response=showtime[_0x4cab71(0x82)](apiUrl,{'args':args}),json=JSON[_0x4cab71(0x7f)](response['toString']());if(json[_0x4cab71(0x94)]&&json[_0x4cab71(0x94)]['docs']&&json[_0x4cab71(0x94)][_0x4cab71(0x8b)]['length']>0x0){var results=[],matchedFiles=[],nonMatchedFiles=[],videoExtensions=['.mp4','.avi',_0x4cab71(0x83),_0x4cab71(0x86),_0x4cab71(0xb9),_0x4cab71(0x9e)];for(var i=0x0;i<json[_0x4cab71(0x94)][_0x4cab71(0x8b)]['length'];i++){var doc=json[_0x4cab71(0x94)][_0x4cab71(0x8b)][i];if(doc[_0x4cab71(0x9d)]&&doc[_0x4cab71(0x9d)]['indexOf'](_0x4cab71(0x7c))!==-0x1)continue;var itemDetailsUrl='https://archive.org/metadata/'+doc['identifier'],itemResponse=showtime[_0x4cab71(0x82)](itemDetailsUrl),itemJson=JSON[_0x4cab71(0x7f)](itemResponse[_0x4cab71(0xba)]());if(itemJson[_0x4cab71(0xb3)]){var foundFile=![];for(var j=0x0;j<itemJson[_0x4cab71(0xb3)][_0x4cab71(0x91)];j++){var file=itemJson['files'][j],isVideoFile=videoExtensions[_0x4cab71(0xaa)](function(_0xb63913){var _0x85d83b=_0x4cab71;return file[_0x85d83b(0x93)][_0x85d83b(0x9f)]()['indexOf'](_0xb63913)!==-0x1;}),titleForCheck=file[_0x4cab71(0x93)][_0x4cab71(0xab)]()[_0x4cab71(0x9f)]()['replace'](/\./g,'\x20')[_0x4cab71(0x96)](/[\-:]/g,'');if(titleForCheck[_0x4cab71(0xb5)](queryIdentifier)===-0x1)continue;var titleWithoutYear=title[_0x4cab71(0x96)](/\s*\d{4}$/,'')['trim'](),hasEpisodeIdentifier=/S\d{2}E\d{2}/i[_0x4cab71(0xa3)](title);if(titleWithoutYear[_0x4cab71(0x8e)]('\x20')[_0x4cab71(0x91)]===0x1&&!hasEpisodeIdentifier&&!/(brrip|1080p|720p|xvid|dvdrip)/i[_0x4cab71(0xa3)](file[_0x4cab71(0x93)][_0x4cab71(0x9f)]()))continue;var excludeJail=title[_0x4cab71(0xb5)](_0x4cab71(0xae))===-0x1&&titleForCheck['indexOf'](_0x4cab71(0xae))!==-0x1;if(excludeJail)continue;var excludeAnimated=title[_0x4cab71(0xb5)](_0x4cab71(0x90))===-0x1&&titleForCheck['indexOf'](_0x4cab71(0x90))!==-0x1;if(excludeAnimated)continue;var excludeOutOfPark=title['indexOf'](_0x4cab71(0x8c))===-0x1&&titleForCheck[_0x4cab71(0xb5)](_0x4cab71(0x8c))!==-0x1;if(excludeOutOfPark)continue;if(title['toLowerCase']()[_0x4cab71(0xb5)](_0x4cab71(0x7e))!==-0x1&&file[_0x4cab71(0x93)][_0x4cab71(0x9f)]()[_0x4cab71(0xb5)](_0x4cab71(0x84))!==-0x1)continue;if(title[_0x4cab71(0x9f)]()[_0x4cab71(0xb5)](_0x4cab71(0x92))!==-0x1&&file[_0x4cab71(0x93)][_0x4cab71(0x9f)]()['indexOf'](_0x4cab71(0x95))===-0x1)continue;if(service[_0x4cab71(0xa1)]&&/[xXhH]265/i['test'](file['name']))continue;var quality=_0x4cab71(0x9a);if(/1080p/i[_0x4cab71(0xa3)](titleForCheck))quality='1080p';else{if(/720p/i[_0x4cab71(0xa3)](titleForCheck))quality=_0x4cab71(0xa9);else/XviD/i['test'](titleForCheck)&&(quality=_0x4cab71(0x89));}if(isVideoFile){var videoLink=_0x4cab71(0x8f)+doc[_0x4cab71(0xbd)]+'/'+encodeURIComponent(file['name']);matchedFiles[_0x4cab71(0xb0)]({'title':file[_0x4cab71(0x93)],'item':videoLink,'quality':quality});}}}}if(matchedFiles[_0x4cab71(0x91)]>0x0)for(var i=0x0;i<matchedFiles['length'];i++){var magnetLink=matchedFiles[i][_0x4cab71(0x80)],quality=matchedFiles[i][_0x4cab71(0xa2)],seederCount='60',item=magnetLink+_0x4cab71(0x98)+quality+_0x4cab71(0x98)+seederCount;results[_0x4cab71(0xb0)](item);}else{nonMatchedFiles[_0x4cab71(0x87)](function(_0x2128e,_0x33f0e5){var _0x187ea3=_0x4cab71;return _0x2128e['title'][_0x187ea3(0x91)]-_0x33f0e5['title'][_0x187ea3(0x91)];});if(nonMatchedFiles['length']>0x0&&!queryIdentifier)for(var i=0x0;i<nonMatchedFiles[_0x4cab71(0x91)];i++){var magnetLink=nonMatchedFiles[i][_0x4cab71(0x80)],quality=nonMatchedFiles[i]['quality'],seederCount='60',item=magnetLink+_0x4cab71(0x98)+quality+'\x20-\x20'+seederCount;results[_0x4cab71(0xb0)](item);}}return page[_0x4cab71(0x88)]=![],results;}else return[];}catch(_0x34f2bc){return page[_0x4cab71(0x88)]=![],[];}function _0x8da7(_0x3a347d,_0x1fb5a2){var _0x29bf9a=_0x29bf();return _0x8da7=function(_0x8da7fc,_0x4ec5b5){_0x8da7fc=_0x8da7fc-0x7b;var _0x4b452d=_0x29bf9a[_0x8da7fc];return _0x4b452d;},_0x8da7(_0x3a347d,_0x1fb5a2);}function _0x29bf(){var _0x4b195e=['trailer\x20park\x20boys\x20out\x20of\x20the\x20park','king-of-the-hill13seasons','split','https://archive.org/download/','trailer\x20park\x20boys\x20the\x20animated\x20series','length','trains\x20and\x20automobiles','name','response','.ia.mp4','replace','6LybquS','\x20-\x20','downloads\x20desc','Unknown','2026098Eanhyy','the\x20simpsons','subject','.flv','toLowerCase','113957jjMAlr','H265Filter','quality','test','trailer\x20park\x20boys','thesimpletons\x202','657988DTIUhi','json','log','720p','some','trim','150168XOQLYT','doopey\x20poopy','trailer\x20park\x20boys\x20jail','king\x20of\x20the\x20hill','push','364OIfETv','3127975aYEBBC','files','match','indexOf','mediatype','Internet\x20Archive\x20|\x20Relevant\x20title\x20part:\x20','bad\x20santa','.wmv','toString','title','10275900uswDwo','identifier','58902IcjckC','Movie\x20Trailer','format','uncle\x20buck','parse','item','https://archive.org/advancedsearch.php','httpReq','.mkv','bbc','15RgJPii','.mov','sort','loading','480p','Internet\x20Archive\x20|\x20No\x20year\x20found\x20in\x20the\x20title.','docs'];_0x29bf=function(){return _0x4b195e;};return _0x29bf();}
    };