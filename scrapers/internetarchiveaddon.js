// Archive.org Addon for Streamian | M7 / Movian Media Center
// Author: F0R3V3R50F7
exports.search = function (page, title) {
    var _0x236084=_0x5661;(function(_0x2bc05c,_0x1a6eef){var _0x425580=_0x5661,_0x3b3816=_0x2bc05c();while(!![]){try{var _0x4f3af1=parseInt(_0x425580(0x1ce))/0x1+parseInt(_0x425580(0x20b))/0x2+-parseInt(_0x425580(0x1cc))/0x3+-parseInt(_0x425580(0x1bc))/0x4+parseInt(_0x425580(0x1bf))/0x5*(parseInt(_0x425580(0x1d0))/0x6)+-parseInt(_0x425580(0x1d1))/0x7+-parseInt(_0x425580(0x1d8))/0x8;if(_0x4f3af1===_0x1a6eef)break;else _0x3b3816['push'](_0x3b3816['shift']());}catch(_0x3e7591){_0x3b3816['push'](_0x3b3816['shift']());}}}(_0x4868,0xd86c5),page[_0x236084(0x1bb)]=!![]);var relevantTitlePartMatch=title[_0x236084(0x208)](/^(.*?)(?:\sS\d{2}E\d{2}|\s\d{4})/i),relevantTitlePart=relevantTitlePartMatch[0x1][_0x236084(0x1c2)]()[_0x236084(0x1be)]()[_0x236084(0x1f5)](/\./g,'\x20')['replace'](/[\-:]/g,''),hasEpisodeIdentifier=/S\d{2}E\d{2}/i[_0x236084(0x203)](title),queryIdentifierMatch=title[_0x236084(0x208)](/\s(S\d{2}E\d{2})/i);console[_0x236084(0x1fe)](_0x236084(0x205)+queryIdentifier);if(queryIdentifierMatch){var queryIdentifier=queryIdentifierMatch[0x1][_0x236084(0x1c2)]()['toLowerCase']();console['log'](_0x236084(0x1fb)+queryIdentifier);}else{var queryIdentifier=title['match'](/\b(19\d{2}|20\d{2})\b/);queryIdentifier?(queryIdentifier=queryIdentifier[0x0],console[_0x236084(0x1fe)](_0x236084(0x200)+queryIdentifier)):console[_0x236084(0x1fe)]('Internet\x20Archive\x20|\x20No\x20year\x20found\x20in\x20the\x20title.');}if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1ec))!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()[_0x236084(0x1ee)](_0x236084(0x1c0))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title['toLowerCase']()['indexOf'](_0x236084(0x1e9))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1d5))!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()[_0x236084(0x1ee)](_0x236084(0x1b4))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x201))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title['toLowerCase']()[_0x236084(0x1ee)](_0x236084(0x1cb))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()['indexOf']('curly\x20sue\x201991')!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('dennis\x20the\x20menace\x201993')!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()['indexOf'](_0x236084(0x1b0))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('dutch\x201991')!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('ferris\x20buellers\x20day\x20off\x201986')!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()['indexOf']('flubber\x201997')!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()['indexOf'](_0x236084(0x20e))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('home\x20alone\x202\x20lost\x20in\x20new\x20york\x201992')!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1e2))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1fd))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('just\x20visiting\x202001')!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('maid\x20in\x20manhattan\x202002')!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1b1))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x209))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()['indexOf'](_0x236084(0x1dd))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1db))!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()[_0x236084(0x1ee)](_0x236084(0x1e5))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title['toLowerCase']()[_0x236084(0x1ee)](_0x236084(0x1e7))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('only\x20the\x20lonely\x201991')!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()['indexOf'](_0x236084(0x1b6))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()['indexOf'](_0x236084(0x1d9))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title['toLowerCase']()[_0x236084(0x1ee)](_0x236084(0x1de))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()['indexOf'](_0x236084(0x1b8))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1e3))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()['indexOf'](_0x236084(0x1f8))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1e8))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1b7))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1eb))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1e6))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title['toLowerCase']()[_0x236084(0x1ee)](_0x236084(0x1f9))!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)]('weird\x20science\x201985')!==-0x1)modifiedTitle=_0x236084(0x1af);else{if(title['toLowerCase']()['indexOf']('trailer\x20park\x20boys')!==-0x1)modifiedTitle=_0x236084(0x1d7);else{if(title[_0x236084(0x1be)]()['indexOf'](_0x236084(0x1fc))!==-0x1)modifiedTitle='thesimpletons\x202';else{if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1d4))!==-0x1)modifiedTitle='sqjeargbrmdmkfm0pgf';else hasEpisodeIdentifier?modifiedTitle=relevantTitlePart:modifiedTitle=title;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}function _0x5661(_0x27e616,_0x24f399){var _0x486833=_0x4868();return _0x5661=function(_0x5661a5,_0x51232d){_0x5661a5=_0x5661a5-0x1af;var _0x21ecaa=_0x486833[_0x5661a5];return _0x21ecaa;},_0x5661(_0x27e616,_0x24f399);}function _0x4868(){var _0x52c0e0=['Duel\x201971','H265Filter','Internet\x20Archive\x20|\x20Modified\x20Query:\x20','trailer\x20park\x20boys\x20the\x20animated\x20series','replace','push','dennis','some\x20kind\x20of\x20wonderful\x201987','vacation\x202015','720p','Internet\x20Archive\x20|\x20Query\x20Identifier:\x20','the\x20simpsons','home\x20sweet\x20home\x20alone\x202021','log','title','Internet\x20Archive\x20|\x20Identifier:\x20','beethovens\x202nd\x201993','trailer\x20park\x20boys\x20out\x20of\x20the\x20park','test','x265\x20ia\x20mp4','Internet\x20Archive\x20|\x20Relevant\x20Title\x20Part:\x20','json','.ia.mp4','match','mr\x20mom\x201983','name','3206632VDwVGD','quality','item','home\x20alone\x201990','mediatype','01-john-hughes','drillbit\x20taylor\x202008','miracle\x20on\x2034th\x20street\x201994','Unknown','length','beethoven\x201992','files','planes,\x20trains\x20and\x20automobiles\x201987','the\x20fifth\x20element\x201997','she\x27s\x20having\x20a\x20baby\x201988','trains\x20and\x20automobiles','trailer\x20park\x20boys\x20jail','loading','2742076IGYrwb','Internet\x20Archive\x20|\x20Title\x20For\x20Check:\x20','toLowerCase','585KXlTKd','101\x20dalmatians\x201996','parse','trim','some','.avi','https://archive.org/advancedsearch.php','https://archive.org/download/','1080p','the\x20great\x20outdoors','.mov','https://archive.org/metadata/','career\x20opportunities\x201991','1755201SUiSan','dennis\x20the\x20menace','1059906BLVRXa','480p','29136xTxQMA','3879715WZgoMK','weird\x20science','Movie\x20Trailer','bad\x20santa','babys\x20day\x20out\x201994','career','doopey\x20poopy','4160592aoyfQz','pretty\x20in\x20pink\x201986','identifier','national\x20lampoon\x27s\x20christmas\x20vacation\x201989','docs','nate\x20and\x20hayes\x201983','reach\x20the\x20rock\x201998','split','toString','.wmv','home\x20alone\x203\x201997','sixteen\x20candles\x201984','format','national\x20lampoon\x27s\x20european\x20vacation\x201985','uncle\x20buck\x201989','national\x20lampoon\x27s\x20vacation','the\x20breakfast\x20club\x201985','1984\x201984','\x20-\x20','the\x20great\x20outdoors\x201988','brats\x202024','subject','indexOf','response','httpReq'];_0x4868=function(){return _0x52c0e0;};return _0x4868();}console[_0x236084(0x1fe)](_0x236084(0x1f3)+modifiedTitle);var apiUrl=_0x236084(0x1c5),args={'q':modifiedTitle,'fl':[_0x236084(0x1da),_0x236084(0x1ff),_0x236084(0x20f),'subject',_0x236084(0x1e4)],'rows':0x23,'page':0x1,'output':_0x236084(0x206)};try{var response=showtime[_0x236084(0x1f0)](apiUrl,{'args':args}),json=JSON[_0x236084(0x1c1)](response['toString']());if(json[_0x236084(0x1ef)]&&json[_0x236084(0x1ef)][_0x236084(0x1dc)]&&json[_0x236084(0x1ef)][_0x236084(0x1dc)]['length']>0x0){var results=[],matchedFiles=[],nonMatchedFiles=[],videoExtensions=['.mp4',_0x236084(0x1c4),'.mkv',_0x236084(0x1c9),_0x236084(0x1e1),'.flv'];for(var i=0x0;i<json[_0x236084(0x1ef)][_0x236084(0x1dc)][_0x236084(0x1b3)];i++){var doc=json['response'][_0x236084(0x1dc)][i];if(doc[_0x236084(0x1ed)]&&doc[_0x236084(0x1ed)][_0x236084(0x1ee)](_0x236084(0x1d3))!==-0x1)continue;var itemDetailsUrl=_0x236084(0x1ca)+doc['identifier'],itemResponse=showtime[_0x236084(0x1f0)](itemDetailsUrl),itemJson=JSON[_0x236084(0x1c1)](itemResponse[_0x236084(0x1e0)]());if(itemJson['files']){var foundFile=![];for(var j=0x0;j<itemJson[_0x236084(0x1b5)]['length'];j++){var file=itemJson[_0x236084(0x1b5)][j],isVideoFile=videoExtensions[_0x236084(0x1c3)](function(_0x49d457){var _0x1bf8cb=_0x236084;return file[_0x1bf8cb(0x20a)][_0x1bf8cb(0x1be)]()[_0x1bf8cb(0x1ee)](_0x49d457)!==-0x1;}),titleForCheck=file[_0x236084(0x20a)][_0x236084(0x1c2)]()[_0x236084(0x1be)]()[_0x236084(0x1f5)](/\./g,'\x20')[_0x236084(0x1f5)](/[\-:]/g,'');if(titleForCheck[_0x236084(0x1ee)](queryIdentifier)===-0x1)continue;;if(titleForCheck[_0x236084(0x1ee)](relevantTitlePart)===-0x1)continue;;var titleWithoutYear=title[_0x236084(0x1f5)](/\s*\d{4}$/,'')['trim']();if(titleWithoutYear[_0x236084(0x1df)]('\x20')[_0x236084(0x1b3)]===0x1&&!hasEpisodeIdentifier&&!/(brrip|1080p|720p|xvid|dvdrip)/i[_0x236084(0x203)](file[_0x236084(0x20a)][_0x236084(0x1be)]()))continue;var excludeJail=title['indexOf'](_0x236084(0x1ba))===-0x1&&titleForCheck[_0x236084(0x1ee)](_0x236084(0x1ba))!==-0x1;if(excludeJail)continue;var excludeAnimated=title['indexOf']('trailer\x20park\x20boys\x20the\x20animated\x20series')===-0x1&&titleForCheck[_0x236084(0x1ee)](_0x236084(0x1f4))!==-0x1;if(excludeAnimated)continue;var excludeOutOfPark=title[_0x236084(0x1ee)](_0x236084(0x202))===-0x1&&titleForCheck[_0x236084(0x1ee)]('trailer\x20park\x20boys\x20out\x20of\x20the\x20park')!==-0x1;if(excludeOutOfPark)continue;if(title[_0x236084(0x1be)]()['indexOf']('uncle\x20buck')!==-0x1&&file[_0x236084(0x20a)][_0x236084(0x1be)]()[_0x236084(0x1ee)]('bbc')!==-0x1)continue;if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1b9))!==-0x1&&file[_0x236084(0x20a)][_0x236084(0x1be)]()[_0x236084(0x1ee)]('.ia.mp4')===-0x1)continue;if(title[_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x1cd))!==-0x1&&file[_0x236084(0x20a)][_0x236084(0x1be)]()[_0x236084(0x1ee)](_0x236084(0x207))===-0x1)continue;if(service[_0x236084(0x1f2)]&&/[xXhH]265/i[_0x236084(0x203)](file[_0x236084(0x20a)]))continue;var quality=_0x236084(0x1b2);if(/1080p/i[_0x236084(0x203)](titleForCheck))quality=_0x236084(0x1c7);else{if(/720p/i[_0x236084(0x203)](titleForCheck))quality=_0x236084(0x1fa);else/xvid/i['test'](titleForCheck)&&(quality=_0x236084(0x1cf));}modifiedTitle[_0x236084(0x1ee)](_0x236084(0x1af))!==-0x1&&titleForCheck[_0x236084(0x1ee)]('sd')===-0x1&&(quality='1080p');modifiedTitle[_0x236084(0x1ee)](_0x236084(0x1af))!==-0x1&&titleForCheck[_0x236084(0x1ee)](_0x236084(0x1c8))!==-0x1&&(quality=_0x236084(0x1cf));modifiedTitle['indexOf']('01-john-hughes')!==-0x1&&titleForCheck[_0x236084(0x1ee)](_0x236084(0x1d2))!==-0x1&&(quality=_0x236084(0x1cf));modifiedTitle[_0x236084(0x1ee)](_0x236084(0x1af))!==-0x1&&titleForCheck[_0x236084(0x1ee)](_0x236084(0x1d6))!==-0x1&&(quality='720p');modifiedTitle['indexOf'](_0x236084(0x1af))!==-0x1&&titleForCheck['indexOf'](_0x236084(0x1f7))!==-0x1&&(quality=_0x236084(0x1cf));modifiedTitle[_0x236084(0x1ee)](_0x236084(0x1f1))!==-0x1&&titleForCheck['indexOf'](_0x236084(0x204))!==-0x1&&(quality=_0x236084(0x1cf));console[_0x236084(0x1fe)](_0x236084(0x1bd)+titleForCheck);if(isVideoFile){var videoLink=_0x236084(0x1c6)+doc[_0x236084(0x1da)]+'/'+encodeURIComponent(file[_0x236084(0x20a)]);matchedFiles[_0x236084(0x1f6)]({'title':file[_0x236084(0x20a)],'item':videoLink,'quality':quality});}}}}if(matchedFiles[_0x236084(0x1b3)]>0x0)for(var i=0x0;i<matchedFiles[_0x236084(0x1b3)];i++){var magnetLink=matchedFiles[i][_0x236084(0x20d)],quality=matchedFiles[i][_0x236084(0x20c)],seederCount='60',item=magnetLink+'\x20-\x20'+quality+_0x236084(0x1ea)+seederCount;results[_0x236084(0x1f6)](item);}else{nonMatchedFiles['sort'](function(_0x38e331,_0x34fc48){var _0xe03178=_0x236084;return _0x38e331[_0xe03178(0x1ff)][_0xe03178(0x1b3)]-_0x34fc48[_0xe03178(0x1ff)]['length'];});if(nonMatchedFiles['length']>0x0&&!queryIdentifier)for(var i=0x0;i<nonMatchedFiles[_0x236084(0x1b3)];i++){var magnetLink=nonMatchedFiles[i][_0x236084(0x20d)],quality=nonMatchedFiles[i][_0x236084(0x20c)],seederCount='60',item=magnetLink+_0x236084(0x1ea)+quality+_0x236084(0x1ea)+seederCount;results[_0x236084(0x1f6)](item);}}return page[_0x236084(0x1bb)]=![],results;}else return[];}catch(_0x358fe9){return page[_0x236084(0x1bb)]=![],[];}
};