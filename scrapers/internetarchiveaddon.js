// Archive.org Addon for Streamian | M7 / Movian Media Center
// Author: F0R3V3R50F7
exports.search = function (page, title) {
    var _0x8a60bc=_0x2716;(function(_0x36b6d8,_0x41d5aa){var _0x41b1ca=_0x2716,_0x397d62=_0x36b6d8();while(!![]){try{var _0x39dda5=parseInt(_0x41b1ca(0x13e))/0x1*(-parseInt(_0x41b1ca(0x15f))/0x2)+-parseInt(_0x41b1ca(0x136))/0x3*(-parseInt(_0x41b1ca(0x11d))/0x4)+-parseInt(_0x41b1ca(0x169))/0x5+-parseInt(_0x41b1ca(0x15a))/0x6*(-parseInt(_0x41b1ca(0x11a))/0x7)+parseInt(_0x41b1ca(0x149))/0x8+parseInt(_0x41b1ca(0x147))/0x9+parseInt(_0x41b1ca(0x122))/0xa*(-parseInt(_0x41b1ca(0x13b))/0xb);if(_0x39dda5===_0x41d5aa)break;else _0x397d62['push'](_0x397d62['shift']());}catch(_0x31f58f){_0x397d62['push'](_0x397d62['shift']());}}}(_0xf187,0x50982),page[_0x8a60bc(0x145)]=!![]);function _0x2716(_0x3bc805,_0x2d9db5){var _0xf18700=_0xf187();return _0x2716=function(_0x27167d,_0x84dd72){_0x27167d=_0x27167d-0x113;var _0x489216=_0xf18700[_0x27167d];return _0x489216;},_0x2716(_0x3bc805,_0x2d9db5);}var relevantTitlePartMatch=title[_0x8a60bc(0x155)](/^(.*?)(?:\sS\d{2}E\d{2}|\s\d{4})/i),relevantTitlePart=relevantTitlePartMatch[0x1][_0x8a60bc(0x151)]()[_0x8a60bc(0x160)]()['replace'](/\./g,'\x20')[_0x8a60bc(0x12d)](/[\-:]/g,''),hasEpisodeIdentifier=/S\d{2}E\d{2}/i['test'](title),queryIdentifierMatch=title[_0x8a60bc(0x155)](/\s(S\d{2}E\d{2})/i);console[_0x8a60bc(0x11e)](_0x8a60bc(0x12a)+queryIdentifier);if(queryIdentifierMatch){var queryIdentifier=queryIdentifierMatch[0x1][_0x8a60bc(0x151)]()['toLowerCase']();console[_0x8a60bc(0x11e)](_0x8a60bc(0x144)+queryIdentifier);}else{var queryIdentifier=title[_0x8a60bc(0x155)](/\b(19\d{2}|20\d{2})\b/);queryIdentifier?(queryIdentifier=queryIdentifier[0x0],console['log'](_0x8a60bc(0x114)+queryIdentifier)):console[_0x8a60bc(0x11e)](_0x8a60bc(0x14c));}if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x148))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title['toLowerCase']()[_0x8a60bc(0x14f)]('101\x20dalmatians\x201996')!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)]('1984\x201984')!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x156))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)]('beethoven\x201992')!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x11f))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x8a60bc(0x160)]()['indexOf'](_0x8a60bc(0x158))!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x143))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x170))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x121))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)]('dutch\x201991')!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()['indexOf'](_0x8a60bc(0x141))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()['indexOf'](_0x8a60bc(0x120))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x154))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()['indexOf']('home\x20alone\x202\x20lost\x20in\x20new\x20york\x201992')!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x14d))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x146))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x115))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x113))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x167))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x16e))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x12e))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x163))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)]('national\x20lampoons\x20european\x20vacation\x201985')!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x173))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x142))!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x164))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)]('pretty\x20in\x20pink\x201986')!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x159))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x14b))!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()['indexOf'](_0x8a60bc(0x168))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x15d))!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x128))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x139))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()['indexOf']('the\x20great\x20outdoors\x201988')!==-0x1)modifiedTitle='01-john-hughes';else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x152))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title[_0x8a60bc(0x160)]()['indexOf'](_0x8a60bc(0x171))!==-0x1)modifiedTitle=_0x8a60bc(0x157);else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x153))!==-0x1)modifiedTitle='01-john-hughes';else{if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x125))!==-0x1)modifiedTitle=_0x8a60bc(0x15c);else{if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)]('the\x20simpsons')!==-0x1)modifiedTitle=_0x8a60bc(0x13f);else{if(title[_0x8a60bc(0x160)]()['indexOf'](_0x8a60bc(0x132))!==-0x1)modifiedTitle='sqjeargbrmdmkfm0pgf';else hasEpisodeIdentifier?modifiedTitle=relevantTitlePart:modifiedTitle=title;}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}console[_0x8a60bc(0x11e)](_0x8a60bc(0x126)+modifiedTitle);function _0xf187(){var _0x231806=['uncle\x20buck','287158dGPbZV','toLowerCase','.avi','Unknown','national\x20lampoons\x20christmas\x20vacation\x201989','planes,\x20trains\x20and\x20automobiles\x201987','720p','bbc','miracle\x20on\x2034th\x20street\x201994','sixteen\x20candles\x201984','2124940EYjkok','identifier','json','title','some','mr\x20mom\x201983','.ia.mp4','dennis\x20the\x20menace\x201993','vacation\x202015','mediatype','national\x20lampoons\x20vacation','split','https://archive.org/advancedsearch.php','maid\x20in\x20manhattan\x202002','Internet\x20Archive\x20|\x20Identifier:\x20','just\x20visiting\x202001','name','H265Filter','Internet\x20Archive\x20|\x20Title\x20For\x20Check:\x20','docs','133DULPCZ','parse','.mkv','4GVjLQJ','log','beethovens\x202nd\x201993','flubber\x201997','drillbit\x20taylor\x202008','10faHOjL','response','format','trailer\x20park\x20boys','Internet\x20Archive\x20|\x20Modified\x20Query:\x20','subject','the\x20breakfast\x20club\x201985','1080p','Internet\x20Archive\x20|\x20Relevant\x20Title\x20Part:\x20','https://archive.org/metadata/','test','replace','nate\x20and\x20hayes\x201983','quality','https://archive.org/download/','480p','bad\x20santa','trailer\x20park\x20boys\x20the\x20animated\x20series','sort','item','1379421ffLgPn','Movie\x20Trailer','\x20-\x20','the\x20fifth\x20element\x201997','httpReq','4004583MbvGDX','trains\x20and\x20automobiles','trailer\x20park\x20boys\x20jail','2cGdgpA','thesimpletons\x202','.wmv','ferris\x20buellers\x20day\x20off\x201986','only\x20the\x20lonely\x201991','curly\x20sue\x201991','Internet\x20Archive\x20|\x20Query\x20Identifier:\x20','loading','home\x20sweet\x20home\x20alone\x202021','4087656KpbCFN','brats\x202024','3634120mUHzRd','length','shes\x20having\x20a\x20baby\x201988','Internet\x20Archive\x20|\x20No\x20year\x20found\x20in\x20the\x20title.','home\x20alone\x203\x201997','push','indexOf','files','trim','uncle\x20buck\x201989','weird\x20science\x201985','home\x20alone\x201990','match','babys\x20day\x20out\x201994','01-john-hughes','career\x20opportunities\x201991','reach\x20the\x20rock\x201998','12018hOjoqC','toString','doopey\x20poopy','some\x20kind\x20of\x20wonderful\x201987'];_0xf187=function(){return _0x231806;};return _0xf187();}var apiUrl=_0x8a60bc(0x175),args={'q':modifiedTitle,'fl':[_0x8a60bc(0x16a),_0x8a60bc(0x16c),_0x8a60bc(0x172),_0x8a60bc(0x127),_0x8a60bc(0x124)],'rows':0x23,'page':0x1,'output':_0x8a60bc(0x16b)};try{var response=showtime[_0x8a60bc(0x13a)](apiUrl,{'args':args}),json=JSON[_0x8a60bc(0x11b)](response['toString']());if(json[_0x8a60bc(0x123)]&&json[_0x8a60bc(0x123)]['docs']&&json[_0x8a60bc(0x123)][_0x8a60bc(0x119)][_0x8a60bc(0x14a)]>0x0){var results=[],matchedFiles=[],nonMatchedFiles=[],videoExtensions=['.mp4',_0x8a60bc(0x161),_0x8a60bc(0x11c),'.mov',_0x8a60bc(0x140),'.flv'];for(var i=0x0;i<json[_0x8a60bc(0x123)][_0x8a60bc(0x119)][_0x8a60bc(0x14a)];i++){var doc=json[_0x8a60bc(0x123)][_0x8a60bc(0x119)][i];if(doc['subject']&&doc[_0x8a60bc(0x127)][_0x8a60bc(0x14f)](_0x8a60bc(0x137))!==-0x1)continue;var itemDetailsUrl=_0x8a60bc(0x12b)+doc[_0x8a60bc(0x16a)],itemResponse=showtime['httpReq'](itemDetailsUrl),itemJson=JSON['parse'](itemResponse[_0x8a60bc(0x15b)]());if(itemJson[_0x8a60bc(0x150)]){var foundFile=![];for(var j=0x0;j<itemJson[_0x8a60bc(0x150)][_0x8a60bc(0x14a)];j++){var file=itemJson[_0x8a60bc(0x150)][j],isVideoFile=videoExtensions[_0x8a60bc(0x16d)](function(_0x31be60){var _0x10bca5=_0x8a60bc;return file[_0x10bca5(0x116)][_0x10bca5(0x160)]()[_0x10bca5(0x14f)](_0x31be60)!==-0x1;}),titleForCheck=file[_0x8a60bc(0x116)][_0x8a60bc(0x151)]()[_0x8a60bc(0x160)]()[_0x8a60bc(0x12d)](/\./g,'\x20')[_0x8a60bc(0x12d)](/[\-:]/g,'');if(titleForCheck['indexOf'](queryIdentifier)===-0x1)continue;;if(titleForCheck['indexOf'](relevantTitlePart)===-0x1)continue;;var titleWithoutYear=title['replace'](/\s*\d{4}$/,'')[_0x8a60bc(0x151)]();if(titleWithoutYear[_0x8a60bc(0x174)]('\x20')['length']===0x1&&!hasEpisodeIdentifier&&!/(brrip|1080p|720p|xvid|dvdrip)/i[_0x8a60bc(0x12c)](file[_0x8a60bc(0x116)][_0x8a60bc(0x160)]()))continue;var excludeJail=title[_0x8a60bc(0x14f)](_0x8a60bc(0x13d))===-0x1&&titleForCheck[_0x8a60bc(0x14f)](_0x8a60bc(0x13d))!==-0x1;if(excludeJail)continue;var excludeAnimated=title[_0x8a60bc(0x14f)](_0x8a60bc(0x133))===-0x1&&titleForCheck[_0x8a60bc(0x14f)](_0x8a60bc(0x133))!==-0x1;if(excludeAnimated)continue;var excludeOutOfPark=title[_0x8a60bc(0x14f)]('trailer\x20park\x20boys\x20out\x20of\x20the\x20park')===-0x1&&titleForCheck['indexOf']('trailer\x20park\x20boys\x20out\x20of\x20the\x20park')!==-0x1;if(excludeOutOfPark)continue;if(title['toLowerCase']()[_0x8a60bc(0x14f)](_0x8a60bc(0x15e))!==-0x1&&file[_0x8a60bc(0x116)][_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x166))!==-0x1)continue;if(title[_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x13c))!==-0x1&&file['name'][_0x8a60bc(0x160)]()[_0x8a60bc(0x14f)](_0x8a60bc(0x16f))===-0x1)continue;if(service[_0x8a60bc(0x117)]&&/[xXhH]265/i['test'](file[_0x8a60bc(0x116)]))continue;var quality=_0x8a60bc(0x162);if(/1080p/i[_0x8a60bc(0x12c)](titleForCheck))quality='1080p';else{if(/720p/i[_0x8a60bc(0x12c)](titleForCheck))quality=_0x8a60bc(0x165);else/xvid/i[_0x8a60bc(0x12c)](titleForCheck)&&(quality='480p');}modifiedTitle[_0x8a60bc(0x14f)](_0x8a60bc(0x157))!==-0x1&&titleForCheck[_0x8a60bc(0x14f)]('SD')===-0x1&&(quality='1080p');quality[_0x8a60bc(0x14f)](_0x8a60bc(0x129))!==-0x1&&titleForCheck[_0x8a60bc(0x14f)](_0x8a60bc(0x129))===-0x1&&(quality=_0x8a60bc(0x131));modifiedTitle[_0x8a60bc(0x14f)](_0x8a60bc(0x157))!==-0x1&&titleForCheck[_0x8a60bc(0x14f)]('sd')!==-0x1&&titleForCheck[_0x8a60bc(0x14f)](_0x8a60bc(0x165))===-0x1&&titleForCheck[_0x8a60bc(0x14f)]('4k')===-0x1&&titleForCheck[_0x8a60bc(0x14f)](_0x8a60bc(0x129))===-0x1&&(quality='480p');console['log'](_0x8a60bc(0x118)+titleForCheck);if(isVideoFile){var videoLink=_0x8a60bc(0x130)+doc[_0x8a60bc(0x16a)]+'/'+encodeURIComponent(file[_0x8a60bc(0x116)]);matchedFiles[_0x8a60bc(0x14e)]({'title':file['name'],'item':videoLink,'quality':quality});}}}}if(matchedFiles[_0x8a60bc(0x14a)]>0x0)for(var i=0x0;i<matchedFiles[_0x8a60bc(0x14a)];i++){var magnetLink=matchedFiles[i][_0x8a60bc(0x135)],quality=matchedFiles[i][_0x8a60bc(0x12f)],seederCount='60',item=magnetLink+_0x8a60bc(0x138)+quality+_0x8a60bc(0x138)+seederCount;results[_0x8a60bc(0x14e)](item);}else{nonMatchedFiles[_0x8a60bc(0x134)](function(_0x51ffe4,_0xadd9e3){var _0x3af3db=_0x8a60bc;return _0x51ffe4['title']['length']-_0xadd9e3[_0x3af3db(0x16c)][_0x3af3db(0x14a)];});if(nonMatchedFiles[_0x8a60bc(0x14a)]>0x0&&!queryIdentifier)for(var i=0x0;i<nonMatchedFiles[_0x8a60bc(0x14a)];i++){var magnetLink=nonMatchedFiles[i]['item'],quality=nonMatchedFiles[i][_0x8a60bc(0x12f)],seederCount='60',item=magnetLink+_0x8a60bc(0x138)+quality+_0x8a60bc(0x138)+seederCount;results[_0x8a60bc(0x14e)](item);}}return page[_0x8a60bc(0x145)]=![],results;}else return[];}catch(_0x155b5d){return page['loading']=![],[];}
};