// Archive.org Addon for Streamian | M7 / Movian Media Center
// Author: F0R3V3R50F7
exports.search = function (page, title) {
    var _0x2f2df7=_0x1ecc;(function(_0x365422,_0x530325){var _0x51d07f=_0x1ecc,_0x4c4feb=_0x365422();while(!![]){try{var _0x40a5fd=parseInt(_0x51d07f(0xa3))/0x1*(parseInt(_0x51d07f(0xb8))/0x2)+parseInt(_0x51d07f(0xa5))/0x3*(parseInt(_0x51d07f(0xb1))/0x4)+-parseInt(_0x51d07f(0x9e))/0x5*(parseInt(_0x51d07f(0x8c))/0x6)+-parseInt(_0x51d07f(0x8a))/0x7*(-parseInt(_0x51d07f(0xa8))/0x8)+parseInt(_0x51d07f(0xad))/0x9+-parseInt(_0x51d07f(0x83))/0xa+-parseInt(_0x51d07f(0x91))/0xb;if(_0x40a5fd===_0x530325)break;else _0x4c4feb['push'](_0x4c4feb['shift']());}catch(_0x940a5b){_0x4c4feb['push'](_0x4c4feb['shift']());}}}(_0x50c2,0xc1879));var relevantTitlePartMatch=title[_0x2f2df7(0x92)](/\s(S\d{2}E\d{2})/i);if(relevantTitlePartMatch){var relevantTitlePart=relevantTitlePartMatch[0x1][_0x2f2df7(0x82)]()[_0x2f2df7(0xac)]();console[_0x2f2df7(0xa6)](_0x2f2df7(0x86)+relevantTitlePart);}else{var relevantTitlePart=title[_0x2f2df7(0x92)](/\b(19\d{2}|20\d{2})\b/);relevantTitlePart?(relevantTitlePart=relevantTitlePart[0x0],console[_0x2f2df7(0xa6)]('Internet\x20Archive\x20|\x20Relevant\x20title\x20part:\x20'+relevantTitlePart)):console['log'](_0x2f2df7(0x8e));}page[_0x2f2df7(0x9d)]=!![];function _0x1ecc(_0x3d298e,_0x17f3a3){var _0x50c26f=_0x50c2();return _0x1ecc=function(_0x1ecc1e,_0x1fbd21){_0x1ecc1e=_0x1ecc1e-0x7e;var _0x572be4=_0x50c26f[_0x1ecc1e];return _0x572be4;},_0x1ecc(_0x3d298e,_0x17f3a3);}var query=title,episodeIdentifier=query[_0x2f2df7(0x92)](/s\d+e\d+/gi),identifier;if(!episodeIdentifier)var identifier=query[_0x2f2df7(0x92)](/\d{4}/i);if(query['toLowerCase']()['indexOf'](_0x2f2df7(0x97))!==-0x1)modifiedQuery='king-of-the-hill13seasons';else{if(query[_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)]('trailer\x20park\x20boys')!==-0x1)modifiedQuery=_0x2f2df7(0x84);else{if(query[_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)](_0x2f2df7(0x8b))!==-0x1)modifiedQuery=_0x2f2df7(0x81);else{if(query[_0x2f2df7(0xac)]()['indexOf'](_0x2f2df7(0x7f))!==-0x1)modifiedQuery=_0x2f2df7(0x99);else episodeIdentifier?modifiedQuery=relevantTitlePart:modifiedQuery=query;}}}var apiUrl=_0x2f2df7(0xba),args={'q':modifiedQuery,'fl':[_0x2f2df7(0xa9),_0x2f2df7(0x8f),_0x2f2df7(0xa7),_0x2f2df7(0x87),_0x2f2df7(0xb7)],'sort':_0x2f2df7(0xb0),'rows':0x23,'page':0x1,'output':'json'};try{var response=showtime[_0x2f2df7(0xb9)](apiUrl,{'args':args}),json=JSON[_0x2f2df7(0x95)](response[_0x2f2df7(0x90)]());if(json[_0x2f2df7(0x96)]&&json[_0x2f2df7(0x96)][_0x2f2df7(0x94)]&&json[_0x2f2df7(0x96)][_0x2f2df7(0x94)][_0x2f2df7(0x9c)]>0x0){var results=[],matchedFiles=[],nonMatchedFiles=[],videoExtensions=['.mp4',_0x2f2df7(0xb4),'.mkv',_0x2f2df7(0x7e),_0x2f2df7(0xa2),_0x2f2df7(0xa4)],cleanedQuery=relevantTitlePart;for(var i=0x0;i<json[_0x2f2df7(0x96)][_0x2f2df7(0x94)][_0x2f2df7(0x9c)];i++){var doc=json[_0x2f2df7(0x96)]['docs'][i];if(doc['subject']&&doc[_0x2f2df7(0x87)][_0x2f2df7(0x9f)](_0x2f2df7(0xae))!==-0x1)continue;var itemDetailsUrl=_0x2f2df7(0xb2)+doc[_0x2f2df7(0xa9)],itemResponse=showtime[_0x2f2df7(0xb9)](itemDetailsUrl),itemJson=JSON['parse'](itemResponse['toString']());if(itemJson['files']){var foundFile=![];for(var j=0x0;j<itemJson['files'][_0x2f2df7(0x9c)];j++){var file=itemJson[_0x2f2df7(0x8d)][j],isVideoFile=![];for(var k=0x0;k<videoExtensions['length'];k++){if(file['name'][_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)](videoExtensions[k])!==-0x1){isVideoFile=!![];break;}}var titleForCheck=file[_0x2f2df7(0x9b)][_0x2f2df7(0x82)]()['toLowerCase']()[_0x2f2df7(0x93)](/\./g,'\x20')[_0x2f2df7(0x93)](/[\-:]/g,'');if(titleForCheck['indexOf'](relevantTitlePart)===-0x1)continue;if(!episodeIdentifier&&titleForCheck['indexOf'](identifier)===-0x1)continue;if(query[_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)]('duel')!==-0x1&&file[_0x2f2df7(0x9b)]['toLowerCase']()[_0x2f2df7(0x9f)](_0x2f2df7(0xaa))!==-0x1)continue;if(query[_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)]('uncle\x20buck')!==-0x1&&file[_0x2f2df7(0x9b)]['toLowerCase']()[_0x2f2df7(0x9f)](_0x2f2df7(0xaf))!==-0x1)continue;if(query[_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)](_0x2f2df7(0x88))!==-0x1&&file[_0x2f2df7(0x9b)][_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)](_0x2f2df7(0xbc))===-0x1)continue;if(query['toLowerCase']()['indexOf']('neighbors\x202014')!==-0x1&&!/(brrip|1080p|720p|xvid|dvdrip)/i[_0x2f2df7(0xa0)](file[_0x2f2df7(0x9b)][_0x2f2df7(0xac)]()))continue;var excludeJail=relevantTitlePart['indexOf'](_0x2f2df7(0x85))===-0x1&&titleForCheck[_0x2f2df7(0x9f)]('trailer\x20park\x20boys\x20jail')!==-0x1;if(excludeJail)continue;var excludeAnimated=relevantTitlePart['indexOf'](_0x2f2df7(0x98))===-0x1&&titleForCheck[_0x2f2df7(0x9f)](_0x2f2df7(0x98))!==-0x1;if(excludeAnimated)continue;var excludeAnimated=relevantTitlePart[_0x2f2df7(0x9f)](_0x2f2df7(0xb3))===-0x1&&titleForCheck['indexOf'](_0x2f2df7(0xb3))!==-0x1;if(excludeAnimated)continue;if(service['H265Filter']&&/[xXhH]265/i[_0x2f2df7(0xa0)](file[_0x2f2df7(0x9b)]))continue;var quality=_0x2f2df7(0x80);if(/1080p/i['test'](titleForCheck))quality='1080p';else{if(/720p/i[_0x2f2df7(0xa0)](titleForCheck))quality='720p';else/XviD/i[_0x2f2df7(0xa0)](titleForCheck)&&(quality=_0x2f2df7(0xbb));}if(episodeIdentifier&&file[_0x2f2df7(0x9b)][_0x2f2df7(0xac)]()[_0x2f2df7(0x9f)](episodeIdentifier[0x0][_0x2f2df7(0xac)]())!==-0x1&&isVideoFile){foundFile=!![];var videoLink=_0x2f2df7(0x9a)+doc[_0x2f2df7(0xa9)]+'/'+encodeURIComponent(file[_0x2f2df7(0x9b)]);matchedFiles[_0x2f2df7(0x89)]({'title':file[_0x2f2df7(0x9b)],'item':videoLink,'quality':quality});}else{if(isVideoFile){var queryWords=cleanedQuery[_0x2f2df7(0xac)]()['split'](/\s+/);if(queryWords[_0x2f2df7(0xa1)](function(_0x14c401){var _0x21db45=_0x2f2df7;return file[_0x21db45(0x9b)][_0x21db45(0xac)]()[_0x21db45(0x9f)](_0x14c401)!==-0x1;})){var videoLink='https://archive.org/download/'+doc[_0x2f2df7(0xa9)]+'/'+encodeURIComponent(file[_0x2f2df7(0x9b)]);nonMatchedFiles[_0x2f2df7(0x89)]({'title':file[_0x2f2df7(0x9b)],'item':videoLink,'quality':quality});}}}}}}if(matchedFiles[_0x2f2df7(0x9c)]>0x0)for(var i=0x0;i<matchedFiles[_0x2f2df7(0x9c)];i++){var magnetLink=matchedFiles[i][_0x2f2df7(0xb5)],quality=matchedFiles[i][_0x2f2df7(0xab)],seederCount='60',item=magnetLink+_0x2f2df7(0xb6)+quality+_0x2f2df7(0xb6)+seederCount;results[_0x2f2df7(0x89)](item);}else{nonMatchedFiles['sort'](function(_0xaa13da,_0x261681){var _0x5bef85=_0x2f2df7;return _0xaa13da[_0x5bef85(0x8f)][_0x5bef85(0x9c)]-_0x261681[_0x5bef85(0x8f)][_0x5bef85(0x9c)];});if(nonMatchedFiles[_0x2f2df7(0x9c)]>0x0&&!episodeIdentifier)for(var i=0x0;i<nonMatchedFiles[_0x2f2df7(0x9c)];i++){var magnetLink=nonMatchedFiles[i]['item'],quality=nonMatchedFiles[i]['quality'],seederCount='60',item=magnetLink+'\x20-\x20'+quality+_0x2f2df7(0xb6)+seederCount;results['push'](item);}else return[];}return page['loading']=![],results;}else return[];}catch(_0x3240ed){return page[_0x2f2df7(0x9d)]=![],[];}function _0x50c2(){var _0x2d25dd=['bbc','downloads\x20desc','1364764TqqzuV','https://archive.org/metadata/','trailer\x20park\x20boys\x20out\x20of\x20the\x20park','.avi','item','\x20-\x20','format','3058606tFHoup','httpReq','https://archive.org/advancedsearch.php','480p','.ia.mp4','.mov','bad\x20santa','Unknown','thesimpletons\x202','trim','12120580xMvHNG','doopey\x20poopy','trailer\x20park\x20boys\x20jail','Internet\x20Archive\x20|\x20Relevant\x20title\x20part:\x20','subject','trains\x20and\x20automobiles','push','4137QkvqtN','the\x20simpsons','4390146OxacyR','files','Internet\x20Archive\x20|\x20No\x20year\x20found\x20in\x20the\x20title.','title','toString','8273309NMchdi','match','replace','docs','parse','response','king\x20of\x20the\x20hill','trailer\x20park\x20boys\x20the\x20animated\x20series','sqjeargbrmdmkfm0pgf','https://archive.org/download/','name','length','loading','5tkXAQA','indexOf','test','every','.wmv','1DlxDBt','.flv','3zNOfkb','log','mediatype','5672IHBpoD','identifier','duel_1971.mp4','quality','toLowerCase','10791468rChVct','Movie\x20Trailer'];_0x50c2=function(){return _0x2d25dd;};return _0x50c2();}
    };